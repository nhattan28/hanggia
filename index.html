<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tra c·ª©u d·ªØ li·ªáu</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 40px;
    }

    .search-box {
      display: flex;
      gap: 10px;
      padding: 0;
      margin-bottom: 15px;
      width: 100%;
      justify-content: center;
    }

    .search-box input {
      padding: 10px;
      font-size: 16px;
      border: 1px solid #aaa;
      border-radius: 8px;
      width: 100%;
      max-width: 500px; /* ƒê·∫£m b·∫£o kh√¥ng qu√° r·ªông tr√™n m√†n h√¨nh l·ªõn */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .search-button {
      background-color: #e53935;
      color: white;
      font-weight: bold;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-bottom: 15px;
      font-size: 16px;
    }

    .search-button:hover {
      background-color: #c62828;
    }

    .result-box {
      border: 2px solid #fdd835;
      background-color: #fffde7;
      border-radius: 10px;
      padding: 20px;
      width: 100%;
      max-width: 800px; /* ƒê·∫£m b·∫£o kh√¥ng qu√° r·ªông */
      min-height: 100px;
      font-size: 16px;
      color: #333;
      white-space: pre-wrap;
      box-sizing: border-box;
    }

    /* Media query cho c√°c thi·∫øt b·ªã di ƒë·ªông */
    @media (max-width: 600px) {
      .search-box input {
        width: 90%;
      }

      .search-button {
        width: 90%;
        font-size: 14px;
      }

      .result-box {
        width: 90%;
        font-size: 14px;
      }
    }

    /* Media query cho c√°c tablet (iPad, etc.) */
    @media (min-width: 601px) and (max-width: 1024px) {
      .search-box input {
        width: 80%;
      }

      .search-button {
        width: 80%;
        font-size: 15px;
      }

      .result-box {
        width: 80%;
      }
    }
  </style>
</head>
<body>

  <div class="search-box">
    <input type="text" id="keyword" placeholder="Nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm...">
  </div>

  <button class="search-button" onclick="search()">üîç T√¨m ki·∫øm</button>

  <div class="result-box" id="results">
    Nh·∫≠p t·ª´ kh√≥a v√† nh·∫•n "T√¨m ki·∫øm" ƒë·ªÉ b·∫Øt ƒë·∫ßu.
  </div>

  <script>
    async function search() {
      const keyword = document.getElementById('keyword').value.trim();
      if (!keyword) {
        document.getElementById('results').innerText = '‚ùó Vui l√≤ng nh·∫≠p t·ª´ kh√≥a!';
        return;
      }

      document.getElementById('results').innerText = '‚è≥ ƒêang t√¨m...';

      const apiUrl = "https://script.google.com/macros/s/AKfycbwj1pTr3VBCQbsfcZm3nRBJk9eWrjhGAegRgxTRFsBUwRLgMEVMFCSW4Z-tNNGeqWFG/exec?q=" + encodeURIComponent(keyword);

      try {
        const response = await fetch(apiUrl);
        const results = await response.json();

        if (!results || results.length === 0) {
          document.getElementById('results').innerText = '‚ùå Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£.';
        } else {
          let output = '‚úÖ K·∫øt qu·∫£:\n\n';
          const uniqueResults = new Set();  // Set ƒë·ªÉ l∆∞u c√°c k·∫øt qu·∫£ duy nh·∫•t

          results.forEach(row => {
            // Duy·ªát qua t·ª´ng c·ªôt trong h√†ng
            row.forEach(cell => {
              const cellValue = cell.trim().toLowerCase(); // Chuy·ªÉn gi√° tr·ªã √¥ th√†nh ch·ªØ th∆∞·ªùng
              const searchKeyword = keyword.toLowerCase(); // Chuy·ªÉn t·ª´ kh√≥a th√†nh ch·ªØ th∆∞·ªùng

              // N·∫øu √¥ ch·ª©a t·ª´ kh√≥a (kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng)
              if (cellValue.includes(searchKeyword)) {
                // T·∫°o chu·ªói d·ªØ li·ªáu t·ª´ h√†ng ƒë·ªÉ hi·ªÉn th·ªã
                const line = row.join(" | ").trim();
                
                if (line && !uniqueResults.has(line)) {
                  uniqueResults.add(line);
                  output += '‚Ä¢ ' + line + '\n';
                }
              }
            });
          });

          if (uniqueResults.size === 0) {
            document.getElementById('results').innerText = '‚ùå Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£.';
          } else {
            document.getElementById('results').innerText = output;
          }
        }
      } catch (err) {
        document.getElementById('results').innerText = '‚ö†Ô∏è L·ªói khi truy c·∫≠p d·ªØ li·ªáu.';
        console.error(err);
      }
    }
  </script>

</body>
</html>
